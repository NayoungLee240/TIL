# Android Studio

## Action bar

* Action bar(Titlebar) 숨기기

  ```java
  @Override
  protected void onCreate(Bundle savedInstanceState) {
  	super.onCreate(savedInstanceState);
  	setContentView(R.layout.activity_main);
  	
      getSupportActionBar().hide();
  }
  ```

  

## AlertDialog Custom

> layout을 이용하여 커스텀

```java
//layout setting
LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(LAYOUT_INFLATER_SERVICE);
View alertView = inflater.inflate(R.layout.content, null);

final ImageView img = alertView.findViewById(R.id.movieImage);
String cd = list.get(position).getMovieCd();

TextView title = alertView.findViewById(R.id.movieName);
title.setText(list.get(position).getMovieNm());
TextView open = alertView.findViewById(R.id.movieOpen);
open.setText("개봉일 "+list.get(position).getOpenDt());

//alertdialog 생성
AlertDialog.Builder builder= new AlertDialog.Builder(SecondActivity.this);

builder.setView(alertView);
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
	@Override
    public void onClick(DialogInterface dialog, int which) {
    }
});
builder.show();
```





## SharedPreferences

> 상태 저장으로 로그인 관련 저장을 할때 주로사용

```java
import androidx.appcompat.app.AppCompatActivity;

import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    SharedPreferences sp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        sp = getSharedPreferences("login", MODE_PRIVATE);
        String status = sp.getString("status","");
        Toast.makeText(this,status,Toast.LENGTH_LONG).show();
    }
    public void ck(View v){	//상태 변경
        SharedPreferences.Editor edit = sp.edit();
        edit.putString("status","ok");
        edit.commit();
    }
    public void ck2(View v){	//저장된 상태 삭제
        SharedPreferences.Editor edit = sp.edit();
        edit.remove("status");
        edit.commit();
    }
}
```



## Permission

> 퍼미션(권한) 물어보기

```java
String[] permission = {
	Manifest.permission.ACCESS_FINE_LOCATION
};
ActivityCompat.requestPermissions(this, permission, 101);
```

> 퍼미션 확인

```java
//권한이 없는경우
if(checkSelfPermission(Manifest.permission.ACCESS_FINE_LOCATION)
   == PackageManager.PERMISSION_DENIED){
    Toast.makeText(this,"Finish", Toast.LENGTH_SHORT).show();
	finish();
}
```



## Login 예제

[p524 MainActivity.java 참고](AndroidProject/P524_201019/app/src/main/java/com/nyoungee/p524/MainActivity.java)



## Google Map

* key 값 https://console.cloud.google.com/apis/

* Gradle 

  ```
      implementation 'com.google.android.gms:play-services-maps:17.0.0'
  ```

* AndroidManifest.xml

  ```xml
  <application
  	...중략 >
  	<meta-data
  		android:name="com.google.android.geo.API_KEY"
          android:value="@string/google_maps_key" />
  ```

* 위치 (onCreate)

  ```java
  supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
  supportMapFragment.getMapAsync(new OnMapReadyCallback() {
      @Override
      public void onMapReady(GoogleMap googleMap) {
          gmap = googleMap;
          if (checkSelfPermission(Manifest.permission.ACCESS_FINE_LOCATION) 
              != PackageManager.PERMISSION_GRANTED &&
              checkSelfPermission(Manifest.permission.ACCESS_COARSE_LOCATION) 
              != PackageManager.PERMISSION_GRANTED) {
                      return;
          }
          gmap.setMyLocationEnabled(true);//내 위치
          LatLng latLng = new LatLng(37.4556574,126.4367135);
          gmap.addMarker(
              new MarkerOptions().position(latLng).title("공항").snippet("xxx")
          );
          gmap.animateCamera(CameraUpdateFactory.newLatLngZoom(latLng,10));
      }
  });
  ```

* 주의 setMyLocationEnabled를 사용했을 때

  ```java
  @SuppressLint("MissingPermission")
      @Override
      protected void onPause() { //일시정지
          super.onPause();
          if(gmap!=null){
              gmap.setMyLocationEnabled(false);
          }
      }
  
      @SuppressLint("MissingPermission")
      @Override
      protected void onResume() { //다시시작
          super.onResume();
          if(gmap!=null){
              gmap.setMyLocationEnabled(true);
          }
      }
  ```

  



* 